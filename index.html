<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ö—Ç–æ —Ç—ã –≤ –ª–µ—Ç–Ω–µ–º –ª–∞–≥–µ—Ä–µ? ‚Äî –®–ê–ì–ê–ô –î–û–ú–ê</title>
<style>
:root{--ink:#2e2623;--accent:#b22222;--paper:#fff8e6;--blue:#1f4a7f;--night:rgba(10,12,18,.38);--navPad:200px}
html,body{height:100%}
body{
  margin:0;color:var(--ink);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",Arial,sans-serif;
  background:radial-gradient(1200px 600px at top left,#fff6d8 0%,#fffaf0 35%,#fff 60%) fixed
}
body.night::before{content:"";position:fixed;inset:0;background:var(--night);z-index:0;pointer-events:none}

/* FX */
.fx{position:fixed;inset:0;pointer-events:none;z-index:1;display:none}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ */
.page{max-width:900px;margin:20px auto;padding:20px;background:var(--paper);border-radius:18px;
  box-shadow:0 30px 60px rgba(0,0,0,.14),inset 0 0 0 2px #e7d9b6,0 0 0 6px rgba(255,255,255,.7),inset 0 0 0 8px #f4ecd1;position:relative;z-index:2}
.top{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:10px}
h1{margin:0;color:var(--accent);font-size:24px}
.flames{display:flex;gap:6px}.flame{opacity:.25;transition:.2s}.flame.on{opacity:1;transform:translateY(-2px)}

/* –¢—É–º–±–ª–µ—Ä */
.toggle{display:flex;align-items:center;gap:10px;justify-content:center;margin:8px 0 12px}
.switch{position:relative;width:50px;height:28px;display:inline-block}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;inset:0;background:#cbd5e1;border-radius:999px;transition:.2s}
.slider:before{content:"";position:absolute;left:3px;top:3px;width:22px;height:22px;background:#fff;border-radius:50%;transition:.2s;box-shadow:0 1px 3px rgba(0,0,0,.25)}
.switch input:checked+.slider{background:#f59e0b}.switch input:checked+.slider:before{transform:translateX(22px)}

.card{position:relative;background:linear-gradient(#fffef7,#fffaf0);border:1px solid #e8e0c7;border-radius:16px;padding:18px;box-shadow:0 10px 24px rgba(0,0,0,.08)}
.stage{position:relative;min-height:420px}

/* –ò–Ω—Ç—Ä–æ */
.intro{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:0;background:transparent;border:0;cursor:pointer;z-index:9}
.intro img{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,.18);pointer-events:none;user-select:none}
.intro.hide{opacity:0;pointer-events:none;transition:.25s}

/* –°–ª–∞–π–¥—ã */
.slide{position:absolute;inset:0;opacity:0;transform:translateX(40px) rotateY(-4deg);transition:.45s}
.slide.active{opacity:1;transform:none}.slide.out{opacity:0;transform:translateX(-40px) rotateY(6deg)}
#question{font-size:22px;margin:6px 0 12px}

/* –û—Ç–≤–µ—Ç—ã */
.answers{
  max-height:72vh;overflow:auto;
  padding:0 10px calc(var(--navPad) + env(safe-area-inset-bottom)) 10px; /* –¥–æ–±–∞–≤–∏–ª —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞ –ø–æ 10px */
  scroll-padding-bottom:calc(var(--navPad) + 24px);
}
.grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.answer{
  display:block;width:100%;text-align:left;padding:12px 14px;
  border:2px dashed var(--blue);border-radius:12px;background:#fdf8ea;
  box-shadow:0 2px 0 rgba(0,0,0,.06);cursor:pointer;
  scroll-margin-bottom:calc(var(--navPad) + 32px)
}
.answer:hover{background:#fff2c7}
/* –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ: –≤–Ω–µ—à–Ω–∏–π –∫–∞–Ω—Ç, –Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –∏ –Ω–µ –Ω–∞–µ–∑–∂–∞–µ—Ç */
.answer.sel{background:#fff7ea;outline:3px solid var(--accent);outline-offset:4px}

.answers .spacer{height:calc(var(--navPad) + 80px)}

/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
.nav{position:sticky;bottom:0;z-index:3;background:linear-gradient(180deg,transparent,#fffaf0 40%);
  padding:10px 6px calc(10px + env(safe-area-inset-bottom));border-bottom-left-radius:14px;border-bottom-right-radius:14px;display:flex;justify-content:flex-end}
#next{background:var(--accent);color:#fff;border:0;border-radius:12px;padding:12px 20px;font-weight:700;box-shadow:0 6px 18px rgba(178,34,34,.25)}
#next:disabled{opacity:.6;box-shadow:none}
@media (max-width:420px){#next{padding:10px 16px;font-size:15px;border-radius:10px}}

#result{text-align:center;display:none}
.badge{width:190px;height:190px;margin:12px auto 4px}
.cta{display:inline-block;margin-top:16px;padding:12px 24px;background:#b22222;color:#fff;border-radius:24px;text-decoration:none;font-weight:700}

body.prestart .top,body.prestart .toggle,body.prestart .nav{display:none!important}
</style>

<script>
/* —Å—Ç–∞—Ä—Ç –ø–æ –∏–Ω—Ç—Ä–æ ‚Äî —Ñ–æ–ª–±—ç–∫ */
window.__startWanted=false;
function startQuiz(){
  if(!document.body.classList.contains('prestart')) return;
  document.body.classList.remove('prestart');
  const b=document.getElementById('intro'); if(b){b.classList.add('hide'); setTimeout(()=>b.remove(),250);}
  document.getElementById('stage').innerHTML='<div class="slide active" style="display:flex;align-items:center;justify-content:center;color:#7b6b7a">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>';
  window.__startWanted=true; if(typeof renderQuestion==="function") renderQuestion();
}
</script>
</head>
<body class="prestart">
<canvas id="fx" class="fx"></canvas>

<div class="page">
  <div class="top">
    <h1>–ö—Ç–æ —Ç—ã –≤ –ª–µ—Ç–Ω–µ–º –ª–∞–≥–µ—Ä–µ?</h1>
    <div class="flames" id="flames">
      <span class="flame">üî•</span><span class="flame">üî•</span><span class="flame">üî•</span><span class="flame">üî•</span>
      <span class="flame">üî•</span><span class="flame">üî•</span><span class="flame">üî•</span><span class="flame">üî•</span>
    </div>
  </div>

  <div class="toggle">
    <label class="switch"><input id="camp" type="checkbox"><span class="slider"></span></label>
    <span style="font-size:14px;color:#555">–ü–æ—Å–∏–¥–µ—Ç—å —É –∫–æ—Å—Ç—Ä–∞</span>
  </div>

  <section class="card" id="quiz" aria-live="polite">
    <button id="intro" class="intro" onclick="startQuiz()"><img src="intro.png" alt="–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç"></button>
    <div id="stage" class="stage"></div>
    <div class="nav" id="nav"><button id="next" disabled>–î–∞–ª–µ–µ</button></div>
  </section>

  <section id="result" class="card">
    <div class="badge" id="badge"></div>
    <h2 id="role" style="color:var(--accent);margin:6px 0 8px"></h2>
    <p id="desc" style="max-width:650px;margin:0 auto 14px;line-height:1.5"></p>
    <div style="margin:12px auto 8px;max-width:680px;text-align:center">
      <p style="margin:0 0 8px">–ì–æ—Ç–æ–≤—ã –ø—Ä–æ–∂–∏—Ç—å <b>–≤–∞—à–µ –ª–µ—Ç–æ –º–µ—á—Ç—ã</b> –≤ –¥—É—Ö–µ –ø–∏–æ–Ω–µ—Ä–ª–∞–≥–µ—Ä—è ‚Äî –ø—Ä—è–º–æ –∏–∑ –¥–æ–º–∞?</p>
      <ul style="text-align:left;display:inline-block;margin:0;padding-left:18px;line-height:1.5">
        <li><b>–®–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Å–∫–æ—Ç–µ–∫–∏</b> –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –ª—é–±–∏–º–∞—è –º—É–∑—ã–∫–∞ –∏ –ª—ë–≥–∫–∏–µ —Ä–∏—Ç–º—ã –≤–º–µ—Å—Ç–æ —Å–∫—É—á–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</li>
        <li>–õ–∞–≥–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã, –¥—É—à–µ–≤–Ω—ã–µ –ø–æ—Å–∏–¥–µ–ª–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥—ã</li>
        <li>¬´–õ–∞–≥–µ—Ä–Ω–æ–µ –º–µ–Ω—é¬ª: –≤–∫—É—Å–Ω–æ, —Å—ã—Ç–Ω–æ –∏ –±–µ–∑ —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã</li>
        <li><b>–û–Ω–ª–∞–π–Ω-–ª–∞–≥–µ—Ä—å:</b> –≤—Å—ë –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ ‚Äî –∏–∑ –¥–æ–º–∞ –≤—ã—Ö–æ–¥–∏—Ç—å –Ω–µ –Ω—É–∂–Ω–æ</li>
      </ul>
      <p style="margin:12px 0 0">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∏–Ω—Ç–µ–Ω—Å–∏–≤—É ¬´–õ–µ—Ç–Ω–∏–π –ª–∞–≥–µ—Ä—å¬ª –æ—Ç –®–ê–ì–ê–ô –î–û–ú–ê ‚Äî <i>–≤–∞—à–µ –ª–µ—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å!</i></p>
      <p><a class="cta" href="https://walk-walk.ru/summer_camp?utm_source=website&utm_medium=test&utm_campaign=test" target="_blank" rel="noopener">–•–æ—á—É –≤ –æ—Ç—Ä—è–¥!</a></p>
    </div>
  </section>
</div>

<audio id="fireAudio" src="fire.mp3" loop></audio>

<script>
/* ===== –ù–ê–°–¢–†–û–ô–ö–ê –ë–ï–ô–î–ñ–ê ===== */
const BADGE_STYLE = 'patch'; // 'patch' | 'rosette' | 'pin'

/* ===== –î–ê–ù–ù–´–ï ===== */
const ROLES={
 "–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã":"–í—Å–µ–≥–¥–∞ –Ω–∞ –≤–∏–¥—É, —É—Ö–æ–∂–µ–Ω–∞, –ª—é–±–∏—Ç —Å—Ü–µ–Ω—É –∏ –ª–∏–Ω–µ–π–∫–∏ ‚Äî —Ü–µ–Ω—Ç—Ä –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è –ª–∞–≥–µ—Ä—è.",
 "–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞":"–ì–ª–∞–≤–Ω–∞—è –ø–æ —Å—Ç–æ–ª–æ–≤–æ–π –∏ –¥—É—à–µ–≤–Ω—ã–º —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º. –ó–Ω–∞–µ—Ç, –≥–¥–µ –¥–æ–±–∞–≤–∫–∞ –∏ —Å –∫–µ–º —Å–∏–¥–µ—Ç—å –∑–∞ —Å—Ç–æ–ª–æ–º.",
 "–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞":"–í–µ–∑–¥–µ —É—á–∞—Å—Ç–≤—É–µ—Ç, –≤—Å—ë –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç—Ä—è–¥—É.",
 "–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞":"–ü–∞–π-–¥–µ–≤–æ—á–∫–∞ –¥–æ –æ—Ç–±–æ—è, –∞ –ø–æ—Ç–æ–º ‚Äî –º–∞—Å—Ç–µ—Ä –¥—Ä—É–∂–µ—Å–∫–∏—Ö —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π.",
 "–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏":"–¢–∞–∫—Ç–∏–∫ –∏ —Å—Ç—Ä–∞—Ç–µ–≥. –î–∞–∂–µ —Ñ–∞–Ω—Ç–∏–∫–∏ –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç —Å –≤—ã–≥–æ–¥–æ–π.",
 "–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞":"–≠—Å—Ç–∞—Ñ–µ—Ç—ã, —Ç—É—Ä—Å–ª—ë—Ç, –∑–∞—Ä—è–¥–∫–∞ ‚Äî –µ—ë —Å—Ç–∏—Ö–∏—è. –ö–æ–º–∞–Ω–¥–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å."
};
const QUESTIONS=[
 {q:"–ß–µ–º –≤—ã –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –≤ –ª–∞–≥–µ—Ä–µ?",a:[
  {t:"–ì–æ—Ç–æ–≤–∏—Ç—å –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è, –∫–æ–Ω–∫—É—Ä—Å—ã",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–°–∏–¥–µ—Ç—å –≤ —Å—Ç–æ–ª–æ–≤–æ–π —Å –ø–æ–¥—Ä—É–∂–∫–∞–º–∏",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–ü–æ–¥—Ä—É–∂–∏—Ç—å—Å—è —Å –≤–æ–∂–∞—Ç—ã–º–∏",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–ü—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –±–µ–∑–æ–±–∏–¥–Ω—ã–µ —à–∞–ª–æ—Å—Ç–∏",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–ò–≥—Ä–∞—Ç—å –≤ –∫–∞—Ä—Ç—ã –¥–æ –æ—Ç–±–æ—è",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–ë–µ–≥–∞—Ç—å —ç—Å—Ç–∞—Ñ–µ—Ç—ã –∏ –∏–≥—Ä–∞—Ç—å –≤ –≤–æ–ª–µ–π–±–æ–ª",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–ß—Ç–æ —Ü–µ–Ω–Ω–æ–≥–æ –≤—ã –∂–¥—ë—Ç–µ –≤ –ø–æ—Å—ã–ª–∫–µ –∏–∑ –¥–æ–º–∞?",a:[
  {t:"–ù–æ–≤–∞—è –∫–æ—Å–º–µ—Ç–∏—á–∫–∞ –∏ –∑–∞–∫–æ–ª–∫–∏",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–ë–∞–Ω–æ—á–∫–∞ –≤–∞—Ä–µ–Ω—å—è/–≤–∫—É—Å–Ω–æ—Å—Ç–∏",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–ü–ª–∞–∫–∞—Ç—ã, —Ñ–ª–∞–∂–∫–∏, —ç–º–±–ª–µ–º—ã",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–®—É—Ç–æ—á–Ω–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞/–∂–≤–∞—á–∫–∏",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–ö–æ–ª–æ–¥–∞ –∫–∞—Ä—Ç",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–õ—é–±–∏–º–æ–µ –±–ª—é–¥–æ –≤ —Å—Ç–æ–ª–æ–≤–æ–π:",a:[
  {t:"–ö–æ—Ç–ª–µ—Ç–∞ —Å –ø—é—Ä–µ",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–ö–æ–º–ø–æ—Ç (–∏ –¥–æ–±–∞–≤–∫—É!)",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–û–ª–∏–≤—å–µ/—Å–∞–ª–∞—Ç–∏–∫–∏",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–ë—É–ª–æ—á–∫–∞ —Å–æ—Å–µ–¥–∞",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–®–æ–∫–æ–ª–∞–¥–∫–∞, –∫–æ—Ç–æ—Ä—É—é —è –ø–æ–ª—É—á—É –æ–±–º–µ–Ω–æ–º",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–ú–∞–∫–∞—Ä–æ–Ω—ã –ø–æ-—Ñ–ª–æ—Ç—Å–∫–∏",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–ù–æ—á—å –≤ –ª–∞–≥–µ—Ä–µ ‚Äî —ç—Ç–æ‚Ä¶",a:[
  {t:"–ö—Ä–∞—Å–∏–≤—ã–µ –ø–∏–∂–∞–º—ã –∏ —Å–æ–Ω",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–ß–∞–π –ø–µ—Ä–µ–¥ —Å–Ω–æ–º –Ω–∞ –∫—É—Ö–Ω–µ",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –æ—Ç—Ä—è–¥–∞",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–°—Ç—Ä–∞—à–∏–ª–∫–∏ –∏ –ø–æ—Ö–æ–¥—ã –∑–∞ –≤–∫—É—Å–Ω—è—à–∫–∞–º–∏",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–ü–∞—Ä—Ç–∏—è –≤ –∫–∞—Ä—Ç—ã –¥–æ –æ—Ç–±–æ—è",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–ü–æ—Ä–∞–Ω—å—à–µ –ª–µ—á—å, —á—Ç–æ–±—ã —Ä–∞–Ω–æ –≤—Å—Ç–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–ú–µ–¥–ª—è–∫ –Ω–∞ –¥–∏—Å–∫–æ—Ç–µ–∫–µ ‚Äî —ç—Ç–æ‚Ä¶",a:[
  {t:"–ú–æ–π –∑–≤—ë–∑–¥–Ω—ã–π —á–∞—Å",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–°–±–µ–≥–∞—Ç—å –∑–∞ –∫–æ–º–ø–æ—Ç–æ–º –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–ü–æ–∑–≤–∞—Ç—å –≤—Å–µ—Ö –Ω–∞ —Ñ–ª–µ—à–º–æ–±",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–®—É—Ç–∫–∞ –Ω–∞–¥ –¥–∏–¥–∂–µ–µ–º",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–°–¥–µ–ª–∫–∞: –∫—Ç–æ —Å–º–µ—à–Ω–µ–µ —Ç–∞–Ω—Ü—É–µ—Ç ‚Äî —Ç–æ–º—É –∫–æ–Ω—Ñ–µ—Ç—É",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–ü–µ—Ä–µ–¥—ã—à–∫–∞ –º–µ–∂–¥—É —Ç–∞–Ω—Ü–∞–º–∏",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–ï—Å–ª–∏ –±—ã –≤—ã —Å—Ç–∞–ª–∏ –≤–æ–∂–∞—Ç–æ–π, –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º‚Ä¶",a:[
  {t:"–°–¥–µ–ª–∞–ª–∞ —Ñ–æ—Ç–æ–∑–æ–Ω—É –∏ –ø—Ä–æ–≤–µ–ª–∞ –±—ã –∫–æ–Ω–∫—É—Ä—Å –∫—Ä–∞—Å–æ—Ç—ã",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–ù–∞–ª–∞–¥–∏–ª–∞ —á–∞–π–Ω–æ-–∫–æ–º–ø–æ—Ç–Ω—ã–µ –ø–æ—Å–∏–¥–µ–ª–∫–∏",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª–∞ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–ù–∞–º–∞–∑–∞–ª–∞ –ø–∞—Å—Ç–æ–π —Ä—É—á–∫–∏ –æ—Ç—Ä—è–¥–∞",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–ù–∞—É—á–∏–ª–∞ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–Ω—ã–º —Ñ–∏—à–∫–∞–º",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–ü—Ä–æ–≤–µ–ª–∞ —ç—Å—Ç–∞—Ñ–µ—Ç—ã",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–õ—É—á—à–∏–π —Ç—Ä–æ—Ñ–µ–π –∏–∑ –ª–∞–≥–µ—Ä—è ‚Äî —ç—Ç–æ‚Ä¶",a:[
  {t:"–§–æ—Ç–æ —Å–æ —Å—Ü–µ–Ω—ã –∏ –∑–Ω–∞—á–æ–∫",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–†–µ—Ü–µ–ø—Ç —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ—Ç–∞",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–ì—Ä–∞–º–æ—Ç–∞ ¬´–°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–∏–æ–Ω–µ—Ä¬ª",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–¢–∞–π–Ω–∞—è –∑–∞–ø–∏—Å–∫–∞, –Ω–∞–π–¥–µ–Ω–Ω–∞—è –Ω–æ—á—å—é",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–£–ø–∞–∫–æ–≤–∫–∞ –∫–∞—Ä–∞–º–µ–ª–µ–∫, –≤—ã–∏–≥—Ä–∞–Ω–Ω–∞—è –≤ –∫–∞—Ä—Ç—ã",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–ú–µ–¥–∞–ª—å/–ø–æ–≤—è–∑–∫–∞ —á–µ–º–ø–∏–æ–Ω–∞",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]},
 {q:"–ì–¥–µ –≤–∞—à–µ –ª—é–±–∏–º–æ–µ –º–µ—Å—Ç–æ –≤ –ª–∞–≥–µ—Ä–µ?",a:[
  {t:"–°—Ü–µ–Ω–∞, –¥–∏—Å–∫–æ—Ç–µ–∫–∏ –∏ –ª–∏–Ω–µ–π–∫–∏",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã"},
  {t:"–°—Ç–æ–ª–æ–≤–∞—è",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
  {t:"–ü–ª–æ—â–∞–¥–∫–∞ –¥–ª—è –æ–±—â–∏—Ö —Å–±–æ—Ä–æ–≤",r:"–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞"},
  {t:"–¢–∞–º, –≥–¥–µ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç",r:"–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞"},
  {t:"–°—Ç–æ–ª –¥–ª—è –∫–∞—Ä—Ç–æ—á–Ω—ã—Ö –±–∞—Ç–∞–ª–∏–π",r:"–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏"},
  {t:"–°—Ç–∞–¥–∏–æ–Ω/—Å–ø–æ—Ä—Ç–ø–ª–æ—â–∞–¥–∫–∞",r:"–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞"}]}
];

/* ===== –õ–û–ì–ò–ö–ê –¢–ï–°–¢–ê ===== */
const stage=document.getElementById('stage');
const flames=[...document.querySelectorAll('#flames .flame')];
const nextBtn=document.getElementById('next');
const result=document.getElementById('result');
const quiz=document.getElementById('quiz');
const roleEl=document.getElementById('role'), descEl=document.getElementById('desc'), badge=document.getElementById('badge');
const nav=document.getElementById('nav');

function setNavPad(){
  const h = nav ? Math.ceil(nav.getBoundingClientRect().height) : 64;
  const pad = h + 120;
  document.documentElement.style.setProperty('--navPad', pad+'px');
  const cur = stage.querySelector('.answers'); if(cur) cur.style.paddingBottom = pad+'px';
}
setNavPad(); new ResizeObserver(setNavPad).observe(nav); addEventListener('resize', setNavPad);

let i=0, pick=null, scores={};
function markProgress(){flames.forEach((f,idx)=>f.classList.toggle('on',idx<i));}

function renderQuestion(){
  const q=QUESTIONS[i]; markProgress();
  const cur=stage.querySelector('.slide.active'); if(cur){cur.classList.add('out'); setTimeout(()=>cur.remove(),450);}
  const el=document.createElement('div');
  el.className='slide'; el.innerHTML=
    `<div id="question">${q.q}</div>
     <div class="answers"><div class="grid">
       ${q.a.map(a=>`<button class="answer" data-r="${a.r}">${a.t}</button>`).join('')}
     </div><div class="spacer"></div></div>`;
  stage.appendChild(el); requestAnimationFrame(()=>el.classList.add('active'));
  pick=null; nextBtn.disabled=true;

  const grid=el.querySelector('.grid');
  grid.addEventListener('click',e=>{
    const btn=e.target.closest('.answer'); if(!btn) return;
    grid.querySelectorAll('.answer').forEach(b=>b.classList.remove('sel'));
    btn.classList.add('sel'); pick=btn.dataset.r; nextBtn.disabled=false;
    btn.scrollIntoView({block:'nearest',behavior:'smooth'});
  });
  setNavPad();
}
window.renderQuestion=renderQuestion;

nextBtn.addEventListener('click',()=>{
  if(!pick) return; scores[pick]=(scores[pick]||0)+1; i++;
  (i<QUESTIONS.length)?renderQuestion():showResult();
});

function showResult(){
  flames.forEach(f=>f.classList.add('on'));
  quiz.style.display='none'; result.style.display='block';
  const winner=Object.keys(scores).reduce((a,b)=>(scores[a]||0)>(scores[b]||0)?a:b);
  roleEl.textContent='–í—ã ‚Äî ' + winner;
  descEl.textContent=ROLES[winner];
  renderBadge(winner);
}

/* –ë–µ–π–¥–∂ (3 —Å—Ç–∏–ª—è) */
function renderBadge(role){
  const ICON={"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫—Ä–∞—Å–æ—Ç—ã":"üëë","–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞":"ü•§","–°–∞–º–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —É—á–∞—Å—Ç–Ω–∏—Ü–∞":"‚≠ê","–¢–∞–π–Ω–∞—è –ø—Ä–æ–∫–∞–∑–Ω–∏—Ü–∞":"üòº","–ò–≥—Ä–æ–∫ –≤ –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏":"üÉè","–°–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∞":"üèÖ"}[role]||"‚≠ê";
  let svg='';
  if(BADGE_STYLE==='patch'){ svg=`
<svg viewBox="0 0 200 200" width="100%" height="100%">
  <defs>
    <filter id="ds" x="-30%" y="-30%" width="160%" height="160%"><feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="#000" flood-opacity=".22"/></filter>
    <filter id="grain" x="0" y="0" width="100%" height="100%"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/><feComponentTransfer><feFuncA type="linear" slope="0.05"/></feComponentTransfer></filter>
    <radialGradient id="cloth" cx="50%" cy="45%" r="70%"><stop offset="0%" stop-color="#fff6e1"/><stop offset="70%" stop-color="#f3dcc0"/><stop offset="100%" stop-color="#e7cda9"/></radialGradient>
  </defs>
  <circle cx="100" cy="100" r="78" fill="url(#cloth)" filter="url(#ds)"/>
  <circle cx="100" cy="100" r="74" fill="none" stroke="#b22222" stroke-width="3" stroke-linecap="round" stroke-dasharray="0 9"/>
  <circle cx="100" cy="100" r="68" fill="none" stroke="#fff" stroke-opacity=".9" stroke-width="4"/>
  <rect x="22" y="22" width="156" height="156" fill="#000" filter="url(#grain)" opacity=".25" rx="78" ry="78"/>
  <text x="100" y="108" text-anchor="middle" dominant-baseline="middle" font-size="66" font-weight="700">${ICON}</text>
</svg>`; }
  else if(BADGE_STYLE==='rosette'){ svg=`
<svg viewBox="0 0 200 220" width="100%" height="100%">
  <defs><radialGradient id="rosC" cx="50%" cy="45%" r="70%"><stop offset="0%" stop-color="#ffe6ea"/><stop offset="60%" stop-color="#ff90a5"/><stop offset="100%" stop-color="#ff5a78"/></radialGradient>
  <filter id="rosDS"><feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="#000" flood-opacity=".22"/></filter></defs>
  <path d="M80 200 L70 220 L100 206 L130 220 L120 200 Z" fill="#b22222" opacity=".95"/>
  <circle cx="100" cy="110" r="78" fill="url(#rosC)" filter="url(#rosDS)" stroke="#fff" stroke-width="6"/>
  <text x="100" y="112" text-anchor="middle" dominant-baseline="middle" font-size="66" font-weight="700">${ICON}</text>
</svg>`; }
  else { svg=`
<svg viewBox="0 0 200 200" width="100%" height="100%">
  <defs>
    <radialGradient id="enamel" cx="50%" cy="40%" r="70%"><stop offset="0%" stop-color="#ffb0bd"/><stop offset="60%" stop-color="#ff6b85"/><stop offset="100%" stop-color="#d92f50"/></radialGradient>
    <linearGradient id="gold" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#ffe39a"/><stop offset="50%" stop-color="#d9a63a"/><stop offset="100%" stop-color="#8d5e12"/></linearGradient>
    <filter id="pinDS"><feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="#000" flood-opacity=".25"/></filter>
  </defs>
  <circle cx="100" cy="100" r="80" fill="url(#gold)" filter="url(#pinDS)"/>
  <circle cx="100" cy="100" r="70" fill="url(#enamel)" stroke="#fff" stroke-opacity=".85" stroke-width="3"/>
  <text x="100" y="106" text-anchor="middle" dominant-baseline="middle" font-size="66" font-weight="700">${ICON}</text>
</svg>`; }
  badge.innerHTML = svg;
}

/* ===== –ö–û–°–¢–Å–†: —É–∑–∫–∞—è –ø–æ–ª–æ—Å–∞, –Ω–æ –∏—Å–∫—Ä –ë–û–õ–¨–®–ï –∏ –Ø–†–ß–ï ===== */
const cv=document.getElementById('fx'), ctx=cv.getContext('2d'), audio=document.getElementById('fireAudio');
let run=false, W=0,H=0,SP=[];
const FIRE_SHIFT = -40;  // —á—É—Ç—å –≤—ã—à–µ
const STRIPE     = 0.94; // –Ω–∏–∂–Ω–∏–µ ~6% —ç–∫—Ä–∞–Ω–∞
const SPARKS     = 280;  // –ø–ª–æ—Ç–Ω–µ–µ –∏—Å–∫—Ä—ã

function size(){W=innerWidth;H=innerHeight;cv.width=W;cv.height=H;cv.style.display=run?'block':'none'}
function makeSpark(){
  const baseY=H+FIRE_SHIFT, sx=W*(0.10+Math.random()*0.80), sy=baseY+Math.random()*16;
  const v0=160+Math.random()*230, vx=(Math.random()*2-1)*42, life=1.0+Math.random()*1.2, s=1.0+Math.random()*1.4;
  return {x:sx,y:sy,vx,vy:-v0,life,maxLife:life,s,phi:Math.random()*6.28};
}
function drawFire(ts){
  ctx.clearRect(0,0,W,H);
  const stripeTop=H*STRIPE, baseY=H+FIRE_SHIFT;

  ctx.save(); ctx.beginPath(); ctx.rect(0,stripeTop,W,H-stripeTop); ctx.clip();

  const glow=ctx.createRadialGradient(W*.5,baseY,10, W*.5,baseY, Math.max(W,H)*0.28);
  glow.addColorStop(0,'rgba(255,200,130,0.28)');
  glow.addColorStop(1,'rgba(255,200,130,0)');
  ctx.fillStyle=glow; ctx.fillRect(0,stripeTop,W,H);

  for(let i=0;i<12;i++){
    const cx=W*0.5 + Math.sin(ts*0.002+i)*W*0.06, cy=baseY-14-Math.random()*22, r=W*(0.016+Math.random()*0.028);
    const g=ctx.createRadialGradient(cx,cy,0,cx,cy,r);
    g.addColorStop(0,'rgba(255,235,190,0.38)');
    g.addColorStop(0.55,'rgba(255,170,70,0.25)');
    g.addColorStop(1,'rgba(255,170,70,0)');
    ctx.fillStyle=g; ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.fill();
  }
  ctx.restore();
}
function loop(ts){
  if(!run) return;
  drawFire(ts);
  ctx.globalCompositeOperation='lighter';
  for(let i=0;i<SPARKS;i++){
    if(!SP[i]) SP[i]=makeSpark();
    const p=SP[i], dt=0.016;
    p.vx += Math.sin(ts*0.001+p.phi)*2.4*dt; p.x+=p.vx*dt; p.y+=p.vy*dt; p.life-=dt;
    const k=Math.max(0,p.life/p.maxLife), a=Math.min(1,0.22+0.85*k), sz=p.s*(0.8+0.45*k);
    const grad=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,sz*3.2);
    grad.addColorStop(0,`hsla(50,100%,88%,${a})`);
    grad.addColorStop(.45,`hsla(35,95%,58%,${a*.95})`);
    grad.addColorStop(1,'hsla(30,90%,40%,0)');
    ctx.fillStyle=grad; ctx.beginPath(); ctx.arc(p.x,p.y,sz*1.9,0,Math.PI*2); ctx.fill();
    if(p.life<=0||p.y<-20||p.x<-20||p.x>W+20) SP[i]=makeSpark();
  }
  ctx.globalCompositeOperation='source-over';
  requestAnimationFrame(loop);
}
function startFire(){if(run) return; run=true; size(); SP=Array(SPARKS); requestAnimationFrame(loop);}
function stopFire(){run=false; size();}
addEventListener('resize',size);
document.getElementById('camp').addEventListener('change',e=>{
  if(e.target.checked){document.body.classList.add('night'); startFire(); try{audio.volume=.5; audio.play().catch(()=>{})}catch(_){}} 
  else{document.body.classList.remove('night'); stopFire(); try{audio.pause(); audio.currentTime=0}catch(_){}}});

/* —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –Ω–∞ —Ä–∞–Ω–Ω–∏–π –∫–ª–∏–∫ –ø–æ –∏–Ω—Ç—Ä–æ */
document.addEventListener('DOMContentLoaded',()=>{ if(window.__startWanted) renderQuestion(); });
setTimeout(()=>{ if(window.__startWanted && !stage.querySelector('.grid')) renderQuestion(); },300);
</script>
</body>
</html>
