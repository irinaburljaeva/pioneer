<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ö—Ç–æ —Ç—ã –≤ –ª–µ—Ç–Ω–µ–º –ª–∞–≥–µ—Ä–µ? ‚Äî –®–ê–ì–ê–ô –î–û–ú–ê</title>
<style>
  :root{ --ink:#3a2f2f; --accent:#b22222; --paper:#fff8e6; --blue:#1f4a7f; }

  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    background: radial-gradient(1200px 600px at top left, #fff6d8 0%, #fffaf0 35%, #fff 60%) fixed;
    font-family: system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",Arial,sans-serif;
    transition: filter .3s ease;
  }
  .page{
    max-width:860px; margin:24px auto; padding:20px; position:relative;
    background:var(--paper); border:5px double var(--accent);
    border-radius:18px; box-shadow:0 30px 60px rgba(0,0,0,.15);
    perspective:1200px;
  }

  /* Intro */
  .intro{
    display:flex;justify-content:center;align-items:center;
    position:relative; z-index:10;
  }
  .intro img{
    max-width:100%; max-height:100vh; height:auto; width:auto;
    display:block; margin:0 auto; object-fit:contain;
    cursor:pointer; box-shadow:0 10px 24px rgba(0,0,0,.2); border-radius:14px;
    outline:none;
  }

  #quizSection{ display:none; position:relative; }
  h1{ margin:0 0 8px; text-align:center; color:var(--accent); }

  /* –ö–∞—Ä—Ç–æ—á–∫–∞-–≤–æ–ø—Ä–æ—Å (–ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–µ) */
  .card{
    background:linear-gradient(#fffef7,#fffaf0);
    border:2px solid #e7d9b6; border-radius:16px; padding:18px 18px 22px;
    transform-origin:left center; transform-style:preserve-3d;
    transition:transform .7s cubic-bezier(.2,.7,.2,1), opacity .4s;
    box-shadow:0 10px 24px rgba(0,0,0,.08);
    position:relative; z-index:2;
  }
  .flip{ transform: rotateY(-12deg); }

  /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å */
  .nav{display:flex;align-items:center;gap:12px;margin-top:14px}
  .progress{height:10px;background:#f1e6c8;border-radius:999px;overflow:hidden;flex:1;border:1px solid #e7d9b6}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#ff7a59);transition:width .5s}
  #qnum{font-size:12px;text-transform:uppercase;color:#5c6b7a;margin:6px 0}
  #question{font-size:22px;margin:6px 0 12px}
  #answers{display:grid;gap:10px; position:relative; z-index:3}
  @media(min-width:700px){#answers{grid-template-columns:1fr 1fr}}
  .answer{
    display:block; width:100%; text-align:left; padding:12px 14px;
    border:2px dashed var(--blue); border-radius:12px; background:#fdf8ea;
    cursor:pointer; transition: background .2s, transform .05s;
  }
  .answer:hover{ background:#fff2c7 }
  .answer.selected{ outline:3px solid var(--accent) }
  #nextBtn{
    margin-top:12px; background:var(--accent); color:#fff; border:none; border-radius:12px;
    padding:10px 16px; font-weight:700; cursor:pointer
  }
  #nextBtn:disabled{ opacity:.6; cursor:not-allowed }

  /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ¬´–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∫–æ—Å—Ç—Ä–∞¬ª */
  .camp-toggle{display:flex;align-items:center;gap:10px;justify-content:center;margin:8px 0 12px}
  .switch{position:relative;display:inline-block;width:46px;height:26px}
  .switch input{opacity:0;width:0;height:0}
  .slider{position:absolute;cursor:pointer;inset:0;background:#cbd5e1;border-radius:999px;transition:.2s}
  .slider:before{position:absolute;content:"";height:20px;width:20px;left:3px;top:3px;background:white;border-radius:50%;transition:.2s;box-shadow:0 1px 3px rgba(0,0,0,.25)}
  .switch input:checked + .slider{background:#f59e0b}
  .switch input:checked + .slider:before{transform:translateX(20px)}

  /* –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º + —Å–≤–µ—á–µ–Ω–∏–µ */
  .night{ filter: brightness(.95) saturate(1.02); }
  .camp-on{ position:relative; }
  .camp-on::before{
    content:""; position:absolute; inset:-10%; pointer-events:none; z-index:0;
    background: radial-gradient(60% 40% at 50% 100%, rgba(255,160,64,.28) 0%, rgba(255,120,40,.18) 35%, rgba(255,90,20,.08) 55%, rgba(0,0,0,0) 70%);
    animation: glow 2.4s ease-in-out infinite alternate;
  }
  @keyframes glow{ from{filter:brightness(1)} to{filter:brightness(1.06)} }

  /* –ò—Å–∫—Ä—ã */
  .sparks{ position:absolute; inset:0; pointer-events:none !important; display:none; z-index:0; }

  /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
  #result{display:none;text-align:center}
  .badge-wrap{margin:18px auto 8px;width:170px;height:170px;position:relative}

  /* CTA */
  .cta{display:inline-block;margin-top:16px;padding:12px 24px;background:#b22222;color:#fff;border-radius:24px;text-decoration:none;font-weight:700}
</style>
</head>
<body>
<div class="page">

  <!-- –ò–Ω—Ç—Ä–æ -->
  <div class="intro" id="intro">
    <img id="introImg" src="intro.png" alt="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç">
  </div>

  <!-- –¢–µ—Å—Ç -->
  <div id="quizSection">
    <canvas id="sparks" class="sparks"></canvas>

    <h1>–ö—Ç–æ —Ç—ã –≤ –ª–µ—Ç–Ω–µ–º –ª–∞–≥–µ—Ä–µ?</h1>

    <div class="camp-toggle">
      <label class="switch">
        <input id="campfireSwitch" type="checkbox" />
        <span class="slider"></span>
      </label>
      <span style="font-size:14px;color:#555">–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∫–æ—Å—Ç—Ä–∞</span>
    </div>

    <section id="quiz" class="card" aria-live="polite">
      <div id="qnum"></div>
      <div id="question"></div>
      <div id="answers"></div>
      <div class="nav">
        <div class="progress"><div class="bar" id="bar"></div></div>
        <button id="nextBtn" disabled>–î–∞–ª–µ–µ</button>
      </div>
    </section>

    <section id="result" class="campfire" style="position:relative; overflow:hidden">
      <div class="badge-wrap" id="badgeWrap"></div>
      <h2 id="role" style="margin:6px 0 6px; color:var(--accent)"></h2>
      <p id="desc" style="max-width:650px; margin:0 auto; line-height:1.5"></p>

      <!-- –ü—Ä–æ–º–æ –±–ª–æ–∫–∞ -->
      <div id="campPromo" style="margin:20px auto 8px; max-width:680px; text-align:center;">
        <p style="margin:0 0 8px;">–ì–æ—Ç–æ–≤—ã –ø—Ä–æ–∂–∏—Ç—å <strong>–≤–∞—à–µ –ª–µ—Ç–æ –º–µ—á—Ç—ã</strong> –≤ –¥—É—Ö–µ –ø–∏–æ–Ω–µ—Ä–ª–∞–≥–µ—Ä—è?</p>
        <ul style="text-align:left; display:inline-block; margin:0; padding-left:18px; line-height:1.5">
          <li>–ó–∞—Ä—è–¥–∫–∏-–¥–∏—Å–∫–æ—Ç–µ–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (–¥–≤–∏–∂–µ–Ω–∏–µ –≤ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ)</li>
          <li>–õ–∞–≥–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã, –¥—É—à–µ–≤–Ω—ã–µ –ø–æ—Å–∏–¥–µ–ª–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥—ã</li>
          <li>¬´–õ–∞–≥–µ—Ä–Ω–æ–µ –º–µ–Ω—é¬ª: –≤–∫—É—Å–Ω–æ, —Å—ã—Ç–Ω–æ –∏ –±–µ–∑ —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã</li>
          <li>–¢—ë–ø–ª–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏ —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–∑ –Ω–∞—Å–∏–ª–∏—è –Ω–∞–¥ —Å–æ–±–æ–π</li>
        </ul>
        <p style="margin:12px 0 0;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∏–Ω—Ç–µ–Ω—Å–∏–≤—É ¬´–õ–µ—Ç–Ω–∏–π –ª–∞–≥–µ—Ä—å¬ª –æ—Ç –®–ê–ì–ê–ô –î–û–ú–ê ‚Äî <em>–≤–∞—à–µ –ª–µ—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å!</em></p>
        <p><a class="cta" href="https://walk-walk.ru/summer_camp?utm_source=website&utm_medium=test&utm_campaign=test" target="_blank" rel="noopener">–•–æ—á—É –≤ –æ—Ç—Ä—è–¥!</a></p>
      </div>

      <div style="margin-top:12px">
        <button id="replay" class="answer" style="border-style:solid; text-align:center">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
      </div>
    </section>
  </div>
</div>

<script>
/* ===== –ì–õ–û–ë–ê–õ–¨–ù–´–ô —Å—Ç–∞—Ä—Ç (–±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–π, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–¥—ë–∂–Ω–æ) ===== */
function startQuiz(){
  var introEl = document.getElementById('intro');
  var quizEl  = document.getElementById('quizSection');
  if (introEl) introEl.style.display = 'none';
  if (quizEl)  quizEl.style.display  = 'block';
  renderQ();
}

/* –ü—Ä–∏–≤—è–∑–∫–∞ —Å—Ç—Ä–æ–≥–æ –∫ intro.png + —Ñ–æ–ª–ª–±–µ–∫ */
(function bindIntro(){
  function bind(){
    var img = document.getElementById('introImg');
    if(!img){ setTimeout(bind, 50); return; }
    // –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ —É–∑–ª–∞, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏
    var clone = img.cloneNode(true);
    img.parentNode.replaceChild(clone, img);
    clone.style.cursor = 'pointer';
    clone.setAttribute('tabindex','0');

    var handler = function(e){ e.preventDefault(); startQuiz(); };
    clone.addEventListener('click', handler, {capture:true, once:true});
    clone.addEventListener('keydown', function(e){
      if(e.key==='Enter' || e.key===' '){ e.preventDefault(); startQuiz(); }
    });
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', bind);
  } else {
    bind();
  }

  // –§–æ–ª–ª–±–µ–∫: –ø–µ—Ä–≤—ã–π –∫–ª–∏–∫ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç, –µ—Å–ª–∏ –∏–Ω—Ç—Ä–æ –µ—â—ë –≤–∏–¥–Ω–æ
  document.addEventListener('click', function once(){
    var introEl = document.getElementById('intro');
    if(introEl && getComputedStyle(introEl).display !== 'none') startQuiz();
    document.removeEventListener('click', once);
  }, {capture:true});
})();

/* ===== –†–æ–ª–∏ ===== */
var ROLES = {
  "–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏":"–í—Å–µ–≥–¥–∞ –Ω–∞ –ø–µ—Ä–≤—ã—Ö —Ä—è–¥–∞—Ö, –≥–∞–ª—Å—Ç—É–∫ –∫–∞–∫ —Å –æ–±–ª–æ–∂–∫–∏, –æ—Å–∞–Ω–∫–∞ ‚Äî –ø—Ä–∏–º–µ—Ä –¥–ª—è –≤—Å–µ—Ö. –õ–∏–Ω–µ–π–∫–∞ –¥–ª—è –Ω–µ—ë ‚Äî –∫–∞–∫ –∫—Ä–∞—Å–Ω–∞—è –¥–æ—Ä–æ–∂–∫–∞.",
  "–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞":"–ú–∞—Å—Ç–µ—Ä —á–∏—Ç–∞—Ç—å –ø–æ–¥ –æ–¥–µ—è–ª–æ–º –∏ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –∫–Ω–∏–∂–∫–∞–º–∏ ¬´–∏–∑-–ø–æ–¥ –ø–æ–ª—ã¬ª. –ú–æ–∂–µ—Ç –ø—Ä–æ—Å–ø–∞—Ç—å –ø–æ–ª–¥–Ω—è, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤ –∫—É—Ä—Å–µ –≤—Å–µ—Ö –ª–∞–≥–µ—Ä–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.",
  "–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞":"–ì–∏—Ç–∞—Ä–∞, –ø–µ—Å–Ω–∏, —Å—Ç—Ä–∞—à–∏–ª–∫–∏ –∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã ¬´–¥–æ –æ—Ç–±–æ—è¬ª. –í–µ—á–µ—Ä–æ–º –≤–æ–∫—Ä—É–≥ –Ω–µ—ë —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤–µ—Å—å –æ—Ç—Ä—è–¥.",
  "–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞":"–ü–µ—Ä–≤–∞—è –≤ —ç—Å—Ç–∞—Ñ–µ—Ç–µ, –Ω–µ–∑–∞–º–µ–Ω–∏–º–∞—è –≤ –ø–æ—Ö–æ–¥–∞—Ö. –ó–Ω–∞–µ—Ç, –∫–∞–∫ —Ä–∞–∑–∂–µ—á—å –∫–æ—Å—Ç—ë—Ä, –∏ –º–æ–∂–µ—Ç –¥–æ–Ω–µ—Å—Ç–∏ –∫–æ—Ç–µ–ª–æ–∫ –¥–∞–∂–µ –ø–æ —Å–∞–º–æ–º—É –∫—Ä—É—Ç–æ–º—É —Å–∫–ª–æ–Ω—É.",
  "–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞":"–ú–∞—Å—Ç–µ—Ä –∫–∞—Ä—Ç–æ—á–Ω—ã—Ö –∏–≥—Ä –Ω–∞ —Ñ–∞–Ω—Ç–∏–∫–∏, –æ–±–º–µ–Ω–æ–≤ –∏ –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫. –£ –Ω–µ—ë –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å —Å–ª–∞–¥–æ—Å—Ç–∏ –∏ –ø–∞—Ä–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∑–∞–ø–∞—Å–µ.",
  "–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞":"–ó–Ω–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏, –¥—Ä—É–∂–∏—Ç —Å –¥–µ–∂—É—Ä–Ω—ã–º–∏ –ø–æ —Å—Ç–æ–ª–æ–≤–æ–π –∏ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Å–ø–æ—Å–æ–± –≤–∑—è—Ç—å –¥–æ–±–∞–≤–∫—É.",
  "–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞":"–° –≤–∏–¥—É –ø–∞–π-–¥–µ–≤–æ—á–∫–∞, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ –æ—Ç–±–æ—è. –ú–æ–∂–µ—Ç –ø–æ–¥–ª–æ–∂–∏—Ç—å –∑—É–±–Ω—É—é –ø–∞—Å—Ç—É –≤ —Ç–∞–ø–æ–∫ –∏–ª–∏ –Ω–∞–º—ã–ª–∏—Ç—å —Ä—É—á–∫—É —Å–æ—Å–µ–¥–Ω–µ–≥–æ –æ—Ç—Ä—è–¥–∞."
};

/* ===== –í–æ–ø—Ä–æ—Å—ã (8) ===== */
var QUESTIONS = [
  {q:"–ß—Ç–æ –¥–ª—è –≤–∞—Å —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –≤ –ª–∞–≥–µ—Ä–µ?",a:[
    {t:"–í—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞ –≤—Å–µ 100",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–ü–æ—Å–ø–∞—Ç—å –∏ –ø–æ—á–∏—Ç–∞—Ç—å",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–í–µ—á–µ—Ä–∞ —É –∫–æ—Å—Ç—Ä–∞",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–ü–æ–±–µ–∂–¥–∞—Ç—å –≤ —ç—Å—Ç–∞—Ñ–µ—Ç–∞—Ö",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–û–±–º–µ–Ω—ã —Å–ª–∞–¥–æ—Å—Ç—è–º–∏",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–ö–æ–º–ø–æ—Ç –∏ –≤–∫—É—Å–Ω–æ—Å—Ç–∏",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–í–µ—Å—ë–ª—ã–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∏",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–ß—Ç–æ –≤—ã –∂–¥—ë—Ç–µ –≤ –ø–æ—Å—ã–ª–∫–µ –∏–∑ –¥–æ–º–∞?",a:[
    {t:"–ù–æ–≤—É—é —Ñ–æ—Ä–º—É/–∑–∞–∫–æ–ª–∫–∏",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–ö–Ω–∏–≥—É –∏–ª–∏ –∂—É—Ä–Ω–∞–ª",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–§–æ–Ω–∞—Ä–∏–∫ –∏ –±–∞—Ç–∞—Ä–µ–π–∫–∏",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–ö—Ä–æ—Å—Å–æ–≤–∫–∏ –¥–ª—è —ç—Å—Ç–∞—Ñ–µ—Ç",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–ü–∞–∫–µ—Ç –∫–∞—Ä–∞–º–µ–ª–µ–∫",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–î–æ–º–∞—à–Ω–µ–µ –≤–∞—Ä–µ–Ω—å–µ",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–®—É—Ç–æ—á–Ω—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–í–∞—à –ª—é–±–∏–º—ã–π –º–æ–º–µ–Ω—Ç –ª–∞–≥–µ—Ä–Ω–æ–≥–æ –¥–Ω—è:",a:[
    {t:"–¢–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏–Ω–µ–π–∫–∞",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–¢–∏—Ö–∏–π —á–∞—Å",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–ü–æ—Å–∏–¥–µ–ª–∫–∏ —É –∫–æ—Å—Ç—Ä–∞",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–û–±–º–µ–Ω —Ñ–∞–Ω—Ç–∏–∫–∞–º–∏",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–û–±–µ–¥/–ø–æ–ª–¥–Ω–∏–∫",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–í—Ä–µ–º—è –ø–æ—Å–ª–µ –æ—Ç–±–æ—è",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–°–≤–æ–±–æ–¥–Ω—ã–π –≤–µ—á–µ—Ä ‚Äî —á—Ç–æ –≤—ã–±–µ—Ä–µ—Ç–µ?",a:[
    {t:"–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ–æ—Ä–º—É –Ω–∞ –∑–∞–≤—Ç—Ä–∞",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–î–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–∂–∫—É/–ø–æ–¥—Ä–µ–º–∞—Ç—å",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–ü—Ä–∏–¥—É–º–∞—Ç—å –ø–µ—Å–Ω—é/–∏—Å—Ç–æ—Ä–∏—é",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–ü–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ —Å—Ç–∞—Ä—Ç–∞–º",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–†–∞–∑–º–µ–Ω—è—Ç—å —Ñ–∞–Ω—Ç–∏–∫–∏ –Ω–∞ –∫–∞—Ä–∞–º–µ–ª—å–∫–∏",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–ó–∞–≥–ª—è–Ω—É—Ç—å –Ω–∞ –∫—É—Ö–Ω—é –∑–∞ –¥–æ–±–∞–≤–∫–æ–π",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–±–∏–¥–Ω—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–°–∞–º–æ–µ –≤–∫—É—Å–Ω–æ–µ –≤ —Å—Ç–æ–ª–æ–≤–æ–π ‚Äî —ç—Ç–æ‚Ä¶",a:[
    {t:"–ú–∞–Ω–Ω–∞—è –∫–∞—à–∞/–∫–æ—Ç–ª–µ—Ç–∞ —Å –ø—é—Ä–µ",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–ë—É–ª–æ—á–∫–∞ –∫ —á–∞—é",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–ì–æ—Ä—è—á–∏–π —á–∞–π (–¥–∞–∂–µ –µ—Å–ª–∏ –∏–∑ —Å—Ç–æ–ª–æ–≤–æ–π)",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–ú–∞–∫–∞—Ä–æ–Ω—ã —Å —Ç—É—à—ë–Ω–∫–æ–π",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–®–æ–∫–æ–ª–∞–¥–∫–∞ –∏–∑ –æ–±–º–µ–Ω–∞",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–ö–æ–º–ø–æ—Ç –∏–ª–∏ –∫–∏—Å–µ–ª—å",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–í—Å—ë –ø–æ–¥—Ä—è–¥, –ª–∏—à—å –±—ã –≤–µ—Å–µ–ª–æ",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–î–æ–∂–¥–ª–∏–≤—ã–π –¥–µ–Ω—å –≤ –ª–∞–≥–µ—Ä–µ ‚Äî –≤–∞—à –≤—ã–±–æ—Ä:",a:[
    {t:"–ù–∞–≤–µ—Å—Ç–∏ –ª–æ—Å–∫: –ø—Ä–∏—á—ë—Å–∫–∞/–≥–∞–ª—Å—Ç—É–∫",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–ü–ª–µ–¥ –∏ –∫–Ω–∏–≥–∞ –ø–æ–¥ –æ–∫–Ω–æ",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–ü–µ—Ç—å –ø–æ–¥ –≥–∏—Ç–∞—Ä—É –≤ –∫–æ—Ä–ø—É—Å–µ",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–û–±–º–µ–Ω —Å–ª–∞–¥–æ—Å—Ç—è–º–∏/–Ω–∞—Å—Ç–æ–ª–∫–∏",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–ß–∞–π —Å –ø–µ—á–µ–Ω—å–µ–º –∏ –∫–æ–º–ø–æ—Ç",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–≤–µ—Å—Ç-—Ä–æ–∑—ã–≥—Ä—ã—à",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–ß—Ç–æ –≤—ã —á–∞—â–µ –≤—Å–µ–≥–æ —Ç–µ—Ä—è–ª–∏ –≤ –ª–∞–≥–µ—Ä–µ?",a:[
    {t:"–ó–Ω–∞—á–æ–∫/–≥–∞–ª—Å—Ç—É–∫",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–ó–∞–∫–ª–∞–¥–∫—É –¥–ª—è –∫–Ω–∏–≥–∏",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–§–æ–Ω–∞—Ä–∏–∫",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–°–ø–æ—Ä—Ç–∏–≤–Ω—É—é –ø–æ–≤—è–∑–∫—É",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–®–æ–∫–æ–ª–∞–¥–∫—É (–µ—ë ¬´–≤—ã–∏–≥—Ä–∞–ª–∏¬ª)",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–°—Ç–∞–∫–∞–Ω –¥–ª—è –∫–æ–º–ø–æ—Ç–∞",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–ö–ª—é—á –æ—Ç —Ç—É–º–±–æ—á–∫–∏ (–∏–Ω–æ–≥–¥–∞)",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]},
  {q:"–û–±—ä—è–≤–∏–ª–∏ ¬´–°–º–æ—Ç—Ä –ø–µ—Å–Ω–∏ –∏ —Å—Ç—Ä–æ—è¬ª. –í–∞—à–∞ —Ä–µ–∞–∫—Ü–∏—è?",a:[
    {t:"–í—ã–ø—Ä—è–º–∏—Ç—å —Å–ø–∏–Ω—É –∏ –≤–ø–µ—Ä—ë–¥!",r:"–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏"},
    {t:"–ü–æ—Å–ø–∞—Ç—å –ø–æ–ª—á–∞—Å–∏–∫–∞ –¥–æ —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏",r:"–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞"},
    {t:"–ü—Ä–∏–¥—É–º–∞—Ç—å —Ä–µ—á—ë–≤–∫—É —É –∫–æ—Å—Ç—Ä–∞",r:"–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞"},
    {t:"–†–∞–∑–º–∏–Ω–∫–∞ –∏ —á—ë—Ç–∫–∏–π —à–∞–≥",r:"–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞"},
    {t:"–î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ –∫–∞—Ä–∞–º–µ–ª—å–∫–∞—Ö –∑–∞ –∫—Ä–∏–∫ –∫–æ–º–∞–Ω–¥—ã",r:"–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞"},
    {t:"–ü–æ—Å–ª–µ —Å–º–æ—Ç—Ä–∞ ‚Äî –≤ —Å—Ç–æ–ª–æ–≤—É—é!",r:"–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞"},
    {t:"–ü–æ–¥–ª–æ–∂–∏—Ç—å —Å–≤–∏—Å—Ç–æ–∫ –≤–æ–∂–∞—Ç–æ–π (—à—É—Ç–∫–∞)",r:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞"}
  ]}
];

/* ===== DOM ===== */
var quizSection = document.getElementById('quizSection');
var campSwitchEl = document.getElementById('campfireSwitch');
var pageEl = document.querySelector('.page');

var quiz = document.getElementById('quiz');
var qnumEl = document.getElementById('qnum');
var qEl = document.getElementById('question');
var answersEl = document.getElementById('answers');
var nextBtn = document.getElementById('nextBtn');
var bar = document.getElementById('bar');

var resultSection = document.getElementById('result');
var roleEl = document.getElementById('role');
var descEl = document.getElementById('desc');
var badgeWrap = document.getElementById('badgeWrap');

var sparksCanvas = document.getElementById('sparks');
var spCtx = sparksCanvas.getContext('2d');

/* ===== –°–æ—Å—Ç–æ—è–Ω–∏–µ ===== */
var idx = 0; var scores = Object.create(null); var picked = null;

/* –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ ‚Äî –æ–¥–∏–Ω —Ä–∞–∑ */
answersEl.addEventListener('click', function(e){
  var btn = e.target.closest('.answer');
  if(!btn) return;
  picked = { t: btn.textContent, r: btn.dataset.role };
  nextBtn.disabled = false;
  [].forEach.call(answersEl.querySelectorAll('.answer'), function(el){ el.classList.remove('selected'); });
  btn.classList.add('selected');
});

/* ===== –†–µ–Ω–¥–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ —Å –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–µ–º ===== */
function renderQ(){
  var total = QUESTIONS.length, q = QUESTIONS[idx];
  qnumEl.textContent = "–í–æ–ø—Ä–æ—Å " + (idx+1) + " –∏–∑ " + total;
  qEl.textContent = q.q;
  answersEl.innerHTML = '';
  picked = null; nextBtn.disabled = true;

  quiz.classList.remove('flip');
  setTimeout(function(){ quiz.classList.add('flip'); }, 20);

  q.a.forEach(function(opt,i){
    var b = document.createElement('button');
    b.type='button'; b.className='answer'; b.textContent=opt.t; b.dataset.role=opt.r;
    b.style.opacity=0; b.style.transform='translateY(6px)';
    setTimeout(function(){ b.style.transition='opacity .25s ease, transform .25s ease'; b.style.opacity=1; b.style.transform='translateY(0)'; }, 60*i);
    answersEl.appendChild(b);
  });
  bar.style.width = ((idx)/total*100)+'%';
}

nextBtn.addEventListener('click', function(){
  if(!picked) return;
  scores[picked.r] = (scores[picked.r]||0)+1;
  idx++;
  if(idx < QUESTIONS.length){ renderQ(); }
  else { showResult(); }
});

/* ===== –†–µ–∑—É–ª—å—Ç–∞—Ç ===== */
function winner(){ return Object.keys(scores).reduce(function(a,b){ return scores[a]>scores[b]?a:b; }); }
function showResult(){
  quiz.style.display='none';
  resultSection.style.display='block';
  var w = winner();
  roleEl.textContent = w;
  descEl.textContent = ROLES[w];
  drawBadge(w);
  bar.style.width = '100%';
}

/* –ó–Ω–∞—á–æ–∫ (SVG) */
function drawBadge(role){
  badgeWrap.innerHTML='';
  var svgNS='http://www.w3.org/2000/svg';
  var svg=document.createElementNS(svgNS,'svg'); svg.setAttribute('viewBox','0 0 200 200'); svg.style.width='100%'; svg.style.height='100%';
  var defs=document.createElementNS(svgNS,'defs');
  var grad=document.createElementNS(svgNS,'radialGradient'); grad.id='g1';
  grad.innerHTML='<stop offset="0%" stop-color="#fff6d6"/><stop offset="60%" stop-color="#f1c16d"/><stop offset="100%" stop-color="#c58a21"/>';
  defs.appendChild(grad); svg.appendChild(defs);
  var circle=document.createElementNS(svgNS,'circle'); circle.setAttribute('cx','100'); circle.setAttribute('cy','100'); circle.setAttribute('r','78'); circle.setAttribute('fill','url(#g1)'); circle.setAttribute('stroke','#8a5a12'); circle.setAttribute('stroke-width','6'); svg.appendChild(circle);
  var ribbon=document.createElementNS(svgNS,'path'); ribbon.setAttribute('d','M60 170 L100 130 L140 170 L120 170 L100 150 L80 170 Z'); ribbon.setAttribute('fill','var(--accent)'); ribbon.setAttribute('opacity','.9'); svg.appendChild(ribbon);
  var icon=document.createElementNS(svgNS,'text'); icon.setAttribute('x','100'); icon.setAttribute('y','105'); icon.setAttribute('text-anchor','middle'); icon.setAttribute('dominant-baseline','central'); icon.setAttribute('font-size','48'); icon.setAttribute('font-weight','700'); icon.setAttribute('fill','#612e0a'); icon.textContent=iconFor(role); svg.appendChild(icon);
  var t=document.createElementNS(svgNS,'text'); t.setAttribute('x','100'); t.setAttribute('y','188'); t.setAttribute('text-anchor','middle'); t.setAttribute('font-size','12'); t.setAttribute('fill','#5a4635'); t.textContent=role; svg.appendChild(t);
  badgeWrap.appendChild(svg);
}
function iconFor(role){
  switch(role){
    case '–ó–≤–µ–∑–¥–∞ –ª–∏–Ω–µ–π–∫–∏': return '‚òÖ';
    case '–•–æ–∑—è–π–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞': return '‚òï';
    case '–ö–æ—Ä–æ–ª–µ–≤–∞ –∫–æ—Å—Ç—Ä–∞': return 'üî•';
    case '–ß–µ–º–ø–∏–æ–Ω–∫–∞ —Ç—É—Ä—Å–ª—ë—Ç–∞': return 'üèÖ';
    case '–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞': return 'üç¨';
    case '–õ—é–±–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–æ–º–ø–æ—Ç–∞': return 'ü•§';
    case '–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ö—É–ª–∏–≥–∞–Ω–∫–∞': return 'üòº';
    default: return '‚≠ê';
  }
}

/* ===== –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∫–æ—Å—Ç—Ä–∞ (–∏—Å–∫—Ä—ã + –∑–≤—É–∫) ===== */
var sparksRunning=false, SP=[], spRAF=null, lastTime=0, windT=0;
var campAudio=null, fadeTimer=null;

function resizeSparks(){
  var r = quizSection.getBoundingClientRect();
  sparksCanvas.width = r.width; sparksCanvas.height = r.height;
}
addEventListener('resize', resizeSparks);

function makeSpark(){
  var w = sparksCanvas.width, h = sparksCanvas.height;
  var sx = w * 0.45 + Math.random()*w*0.10;
  var sy = h + Math.random()*30;
  var v0 = 60 + Math.random()*140;
  var vx = (Math.random()*2 - 1) * 20;
  var life = 0.8 + Math.random()*1.6;
  var size = 1 + Math.random()*2.3;
  var phase = Math.random()*Math.PI*2;
  return { x:sx, y:sy, vx:vx, vy:-v0, size:size, life:life, maxLife:life, phase:phase, hue: 30 + Math.random()*12 };
}
function startSparks(){
  if(sparksRunning) return; sparksRunning=true; resizeSparks();
  SP = Array.from({length:100}, makeSpark); lastTime = performance.now();
  loopSparks();
}
function stopSparks(){ sparksRunning=false; if(spRAF) cancelAnimationFrame(spRAF); }
function loopSparks(){
  if(!sparksRunning) return;
  var now = performance.now(); var dt = (now - lastTime)/1000; if(dt>0.05) dt=0.05; lastTime=now; windT+=dt;
  var w = sparksCanvas.width, h = sparksCanvas.height;
  spCtx.clearRect(0,0,w,h); spCtx.globalCompositeOperation='lighter';
  for(var i=0;i<SP.length;i++){
    var p = SP[i];
    var wind = Math.sin(windT*0.9 + p.phase)*20; var jitter = Math.sin(windT*6 + p.phase)*4;
    p.vx += (wind*0.5) * dt; p.x += (p.vx + jitter) * dt; p.y += p.vy * dt;
    p.life -= dt; var k = Math.max(0, p.life/p.maxLife); var size = p.size * (0.6 + 0.4*k); var alpha = Math.min(1, 0.15 + k*0.9);
    var trail = spCtx.createRadialGradient(p.x,p.y+size*2,0,p.x,p.y+size*2,size*6);
    trail.addColorStop(0, 'hsla('+(p.hue+5)+',90%,55%,'+(alpha*0.35)+')'); trail.addColorStop(1,'hsla(25,90%,50%,0)');
    spCtx.fillStyle = trail; spCtx.beginPath(); spCtx.arc(p.x,p.y+size*2,size*4,0,Math.PI*2); spCtx.fill();
    var grad = spCtx.createRadialGradient(p.x,p.y,0,p.x,p.y,size*3);
    grad.addColorStop(0, 'hsla(50,100%,85%,'+alpha+')'); grad.addColorStop(0.35, 'hsla('+p.hue+',95%,60%,'+(alpha*0.9)+')'); grad.addColorStop(1, 'hsla('+(p.hue+10)+',90%,40%,0)');
    spCtx.fillStyle = grad; spCtx.beginPath(); spCtx.arc(p.x,p.y,size*2.2,0,Math.PI*2); spCtx.fill();
    if (p.life<=0 || p.y<-20 || p.x<-20 || p.x>w+20){ if
